@page "/"

<PageTitle>Home</PageTitle>

<MudContainer MaxWidth="MaxWidth.Large" Class="mt-4">

    @* AuthorizeView for authenticated vs anonymous users *@
    <AuthorizeView>
        <Authorized>
            <MudPaper Elevation="2" Class="pa-4 mb-4">
                <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mb-2">
                    <MudIcon Icon="@Icons.Material.Filled.Person" Color="Color.Success" />
                    <MudText Typo="Typo.h6">Welcome, @context.User.Identity?.Name! - @string.Join(", ", context.User.Claims.Where(c => c.Type == System.Security.Claims.ClaimTypes.Role).Select(c => c.Value))</MudText>
                </MudStack>
                <MudText Typo="Typo.body1">You are signed in and can access authenticated content.</MudText>
            </MudPaper>
        </Authorized>
        <NotAuthorized>
            <MudPaper Elevation="2" Class="pa-4 mb-4">
                <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mb-2">
                    <MudIcon Icon="@Icons.Material.Filled.PersonOutline" Color="Color.Default" />
                    <MudText Typo="Typo.h6">Welcome, Guest!</MudText>
                </MudStack>
                <MudText Typo="Typo.body1">Please sign in to access personalized content.</MudText>
            </MudPaper>
        </NotAuthorized>
    </AuthorizeView>

    @* AuthorizeView with Role-based content for Admin users *@
    <AuthorizeView Policy="RequireAdminRole">
        <Authorized>
            <MudAlert Severity="Severity.Info" Class="mb-4">
                <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2">
                    <MudIcon Icon="@Icons.Material.Filled.AdminPanelSettings" />
                    <MudText Typo="Typo.body1">
                        <strong>Admin Access:</strong> You have administrative privileges. 
                        Visit the <MudLink Href="/admin">Admin Dashboard</MudLink> to manage the application.
                    </MudText>
                </MudStack>
            </MudAlert>
        </Authorized>
    </AuthorizeView>

    @* AuthorizeView with Role-based content for regular users (User or Admin role) *@
    <AuthorizeView Policy="RequireUserRole">
        <Authorized>
            <MudPaper Elevation="2" Class="pa-4">
                <MudStack Row="true" AlignItems="AlignItems.Center" Spacing="2" Class="mb-3">
                    <MudIcon Icon="@Icons.Material.Filled.Dashboard" Color="Color.Primary" />
                    <MudText Typo="Typo.h6">Your Dashboard</MudText>
                </MudStack>

            </MudPaper>
        </Authorized>
    </AuthorizeView>
</MudContainer>